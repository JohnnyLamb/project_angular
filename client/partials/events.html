<div class="col-md-4">
  <h1>Plan your night {{user}}</h2>
  <div ng-show="error" class="alert alert-danger">{{errorMessage}}</div>
  <form class="form">
    <div class="form-group">
      <label>Search in your area</label>
      <input type="text" class="form-control" name="location" ng-model="city">
    </div>
    <div class="form-group">
      <label>What are you looking for</label>
      <input type="text" class="form-control" name="term" ng-model="term">
    </div>
    <div>
       <h3>{{error}}</h3>
      </div>
      <div>
        <button ng-click='getYelp()' type="submit" class="btn btn-default" ng-disabled="disabled">Submit</button>
      </div>
      <br>
       </table>
    <div><h1>Destinations for tonight</h1></div>
     <table class="table table-striped">
      <thead>
      <tr>
        <td>
          <a href="#/events" ng-click="sortType = 'name'; sortReverse = !sortReverse">
            Name
            <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
        <td>
          <a href="#/events" ng-click="sortType = 'location.display_address[0]'; sortReverse = !sortReverse">
          Address
            <span ng-show="sortType == 'location.display_address[0]' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'location.display_address[0]' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
        <td>
          <a href="#/events" ng-click="sortType = 'rating_img_url'; sortReverse = !sortReverse">
          Rating
            <span ng-show="sortType == 'rating_img_url' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'rating_img_url' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
        <td>
          <a href="#/events" ng-click="sortType = 'review_count'; sortReverse = !sortReverse">
          # of Reviews
            <span ng-show="sortType == 'rating_img_url' && !sortReverse" class="fa fa-caret-down"></span>
            <span ng-show="sortType == 'rating_img_url' && sortReverse" class="fa fa-caret-up"></span>
          </a>
        </td>
      </tr>
    </thead>
      <tbody id="added-events">
       <tr ng-repeat='addedevent in addedEvents | orderBy:sortType:sortReverse'>
        <td>{{addedevent.name}}</td>

        <td>{{addedevent.location.display_address[0] +" "+ addedevent.location.display_address[1]}}</td>

        <td><img ng-src='{{addedevent.rating_img_url}}'/></td>

        <td>{{addedevent.review_count}}</td>

        <td>{{addedevent.phone}}</td>

        <td><a target='_blank' ng-href='{{addedevent.url}}'>{{addedevent.url}}</td>
        <td class='text-right'>
          <button ng-click="deleteEvent(addedevent._id)" class='btn btn-primary'><span class='glyphicon glyphicon-minus'>Remove</span></button>
            </td>
        </tr>
      </tbody>
    </table>
    <div><h1>Search Results</h1></div>
      <table class="table table-striped">
        <thead>
      <tr>
        <td>
          <a href="#/events" ng-click="sortType2 = 'name'; sortReverse2 = !sortReverse2">
            Name
            <span ng-show="sortType2 == 'name' && !sortReverse2" class="fa fa-caret-down"></span>
            <span ng-show="sortType2 == 'name' && sortReverse2" class="fa fa-caret-up"></span>
          </a>
        </td>
        <td>
          <a href="#/events" ng-click="sortType2 = 'location.display_address[0]'; sortReverse2 = !sortReverse2">
          Address
            <span ng-show="sortType2 == 'location.display_address[0]' && !sortReverse2" class="fa fa-caret-down"></span>
            <span ng-show="sortType2 == 'location.display_address[0]' && sortReverse2" class="fa fa-caret-up"></span>
          </a>
        </td>
        <td>
          <a href="#/events" ng-click="sortType2 = 'rating_img_url'; sortReverse2 = !sortReverse2">
          Rating
            <span ng-show="sortType2 == 'rating_img_url' && !sortReverse2" class="fa fa-caret-down"></span>
            <span ng-show="sortType2 == 'rating_img_url' && sortReverse2" class="fa fa-caret-up"></span>
          </a>
        </td>
        <td>
          <a href="#/events" ng-click="sortType2 = 'review_count'; sortReverse2 = !sortReverse2">
          # of Reviews
            <span ng-show="sortType2 == 'rating_img_url' && !sortReverse2" class="fa fa-caret-down"></span>
            <span ng-show="sortType2 == 'rating_img_url' && sortReverse2" class="fa fa-caret-up"></span>
          </a>
        </td>
      </tr>
    </thead>
      <tbody id="all-events">
       <tr ng-repeat='event in events | orderBy:sortType2:sortReverse2'>
        <td>{{event.name}}</td>

        <td>{{event.location.display_address[0] +" "+ event.location.display_address[1]}}</td>

        <td><img ng-src='{{event.rating_img_url}}'/></td>

        <td>{{event.review_count}}</td>

        <td>{{event.display_phone}}</td>

        <td><a target='_blank' ng-href='{{event.url}}'>{{event.url}}</td>

        <td class='text-right'>
          <button ng-click="addEvent(event)" class='btn btn-primary'><span class='glyphicon glyphicon-plus'>Add</span></button>
            </td>
        </tr>
      </tbody>

  </form>
</div>
